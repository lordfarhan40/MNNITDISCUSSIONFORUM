<html>
    {{>header}}
    <link rel="stylesheet" href="/css/thread.css">
    <body>
        {{>nav}}
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-8" style="margin-bottom: 30px">
                    <h2><strong>{{threadName}}</strong><h2>
                </div>
                {{#if name}}
                    {{#if threadAdmin}}
                    <div class="col-lg-2 col-md-2">
                        <a style="margin-top:15px" class="btn btn-info btn-block" href="/manage_subscriptions?_id={{_id}}">Manage Subscriptions</a>
                    </div>                
                    {{else}}
                    {{#if requestSubs}}
                    <div class="col-lg-2 col-md-2">
                        <a style="margin-top:15px" class="btn btn-info btn-block" href="/subscribe?_id={{_id}}">Subscribe</a>
                    </div>
                    {{/if}}
                    {{#if removeSubs}}
                    <div class="col-lg-2 col-md-2">
                        <a style="margin-top:15px" class="btn btn-info btn-block" href="/subscribe?_id={{_id}}">Subscribe</a>
                    </div>   
                    {{/if}}
                    {{#if waitSubs}}
                    <div class="col-lg-2 col-md-2">
                        <a style="margin-top:15px" class="btn btn-info btn-block" href="/subscribe?_id={{_id}}">Subscribe</a>
                    </div> 
                    {{/if}}
                    {{/if}}
                    {{#if allowPost}}
                    <div class="col-lg-2 col-md-2">
                        <a style="margin-top:15px" class="btn btn-info btn-block" href="#" data-toggle="modal" data-target="#myModal">Post Reply</a>
                    </div>
                    {{/if}}
                {{/if}}
            </div>
            {{{paginate}}}
            <table style="width:100%">
            {{#each posts}}
                <tr class="post" style="border-bottom: 1px solid black;background-color: #2c3e50;color: white;">
                    <td  class="col-lg-2"><h4><strong><a href="/profile?_id={{this.postBy._id}}">{{this.postBy.name}}</strong></h4></td>
                    <td  class="col-lg-7">{{#dateFormat this.date}}{{/dateFormat}}</td>
                    <td  class="col-lg-1">
                        <a href="/post?_id={{this._id}}" >#{{this.indexNo}}</a>
                    </td>
                </tr>
                <tr style="background: #ECECEC;border-bottom: 10px solid white">
                <td class="gravatar"><img class="img-thumbnail" src="https://www.gravatar.com/avatar/{{this.gravatar}}"/></td>
                <td class="content" style="padding:10px" colspan="3"><h4>{{this.content}}</h4></td>
                </tr>
            {{else}}
                <tr>
                    Sorry but you have not subscribed to the thread, please request for subscription
                </tr>
            {{/each}}
            </table>

        <!--Modal Is-->
        <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog">
            
            <!-- Modal content-->
            <div class="modal-content">
                <form method="POST" action="/post_reply">
                <input type="hidden" name="_id" value="{{_id}}">
                <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Post reply</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="content">Enter the stuff you want to say: </label>
                        <textarea class="form-control" rows="10" id="content" placeholder="Enter the content" name="content" required></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                <button class="btn btn-info">Post reply</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
                </form>
            </div>
            
            </div>
        </div> 
    </body>
</html>
